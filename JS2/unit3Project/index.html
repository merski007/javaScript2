<!doctype html>
<html ng-app='todoApp'>

<head>
    <title>{{appName}}</title>

    <!-- Favicon -->
    <!-- <link rel="shortcut icon" href="img/favicon.ico" /> -->

    <!-- Angular Material requires Angular.js Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-aria.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-messages.min.js"></script>

    <!-- Angular Material Library -->
    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.js"></script>

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/5.5.4/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/2.3.0/angularfire.min.js"></script>

    <!-- Site JS -->
    <script src="js/site.js"></script>

    <!-- Site CSS -->
    <link rel="stylesheet" type="text/css" href="css/site.css">
    <!--angularJS material css link-->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.css">
    <!-- Google icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>



<body>
    <div layout='column' ng-controller="appCtrl">
        <!-- Header: START -->
        <md-toolbar>
            <div class='md-toolbar-tools'>
                <h2 md-truncate flex><b>{{appName}}</b></h2>
                <md-button ng-click="toggleRight()" ng-hide="isOpenRight()">Sign In <md-icon md-font-library="material-icons">account_box</md-icon>
                </md-button>
            </div>
        </md-toolbar>
        <!-- Header: END-->

        <!-- Right side nav for login: START -->
        <md-sidenav class='md-sidenav-right md-whiteframe-4dp' md-component-id='right'>

            <md-toolbar class='md-theme-light'>
                <div ng-controller='authCtrl'>
                    <h1 class='md-toolbar-tools' ng-hide="authUser">Sign In
                    </h1>
                    <h1 class='md-toolbar-tools' ng-show="authUser">Sign Out
                    </h1>
                </div>
            </md-toolbar>
            <md-content ng-controller='RightCtrl' layout-padding>
                <form name='userLogin' ng-controller='authCtrl'>
                    <md-input-container>
                        <label>Email</label>
                        <input required name='userEmail' ng-model='userEmail' type='email' md-autofocus>
                        <div ng-messages='userLogin.userEmail.$error'>
                            <div ng-message="email">This field must be a valid email address.</div>
                            <div ng-message="required">Uh-oh, looks like you forgot something.</div>
                        </div>
                    </md-input-container>
                    <md-input-container>
                        <label>Password</label>
                        <input required name='userPassword' ng-model='userPassword' type='password' minlength="6">
                        <div ng-messages='userLogin.userPassword.$error'>
                            <div ng-message='required'>Uh-oh, looks like you forgot something.</div>
                            <div ng-message="minlength">That's too short!</div>
                        </div>
                    </md-input-container>
                    <md-button class="md-primary md-raised" ng-click="login()">Login</md-button>
                    <md-button class="md-accent md-raised" ng-click="createUser()">Create User</md-button>
                </form>
                <md-button ng-click="close()" class="md-primary">
                    Close Sidenav
                </md-button>
            </md-content>

        </md-sidenav>
        <!-- Right side nav for login: END -->


    </div>
    <div ng-controller='authCtrl'>
        <h3>Login</h3>
        <label>email: <input type='text' ng-model='userEmail'></label>
        <label>password: <input type='text' ng-model='userPassword'></label>
        <br>
        <button ng-click="createUser()" ng-hide="authUser">Create User</button>
        <button ng-click="login()" ng-hide="authUser">Login</button>
        <button ng-click="updateUser()" ng-show="authUser">Update User</button>
        <button ng-click="logout()" ng-show="authUser">Logout</button>
        <br>
        <div ng-show="authUser">
            Logged in as: {{authUser.email}} <br>
        </div>
    </div>
    <div ng-controller='todoCtrl'>
        <h3>My Todos:</h3>
        <label>New todo: <input type='text' ng-model='newTodo'></label>
        <label>Group:
            <select ng-model='group'>
                <option value="0" ng-selected="selected">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </label>
        <button ng-click='addTodo()'>Add</button>
        <hr>
        <p>Uncategorized todos ({{getIncompleteTodos('0').length}}):</p>
        <ul>
            <li ng-repeat='todo in getIncompleteTodos("0")'>
                <input type='checkbox' ng-model='todo.done'>
                {{todo.text}}
            </li>
        </ul>
        <hr>
        <p>Group 1 todos ({{getIncompleteTodos('1').length}}):</p>
        <ul>
            <li ng-repeat='todo in getIncompleteTodos("1")'>
                <input type='checkbox' ng-model='todo.done'>
                {{todo.text}}
            </li>
        </ul>
        <hr>
        <p>Group 2 todos ({{getIncompleteTodos('2').length}}):</p>
        <ul>
            <li ng-repeat='todo in getIncompleteTodos("2")'>
                <input type='checkbox' ng-model='todo.done'>
                {{todo.text}}
            </li>
        </ul>
        <hr>
        <p>Group 3 todos ({{getIncompleteTodos('3').length}}):</p>
        <ul>
            <li ng-repeat='todo in getIncompleteTodos("3")'>
                <input type='checkbox' ng-model='todo.done'>
                {{todo.text}}
            </li>
        </ul>
        <hr>
        <p>Group 4 todos ({{getIncompleteTodos('4').length}}):</p>
        <ul>
            <li ng-repeat='todo in getIncompleteTodos("4")'>
                <input type='checkbox' ng-model='todo.done'>
                {{todo.text}}
            </li>
        </ul>
        <hr>
        <p>Completed {{getCompleteTodos().length}} todos:</p>
        <ul>
            <li ng-repeat='todo in getCompleteTodos()'>
                <input type='checkbox' ng-model='todo.done'>
                {{todo.text}}
            </li>
        </ul>
        <hr>
        <button type='submit' ng-click='clearCompleted()'>Clear completed</button>
    </div>
</body>

</html>